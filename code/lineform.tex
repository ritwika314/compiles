using Motion:
  sensors Pose pose  // Pose is a tuple of Position and Orientation
  actuators
    Position target
    Boolean reached

allread: Position [] x $\label{lineformp}$

TargetUpdate:
  pre True
  eff if not(pid == $\NMAX$ - 1 or pid == 0):
     Motion.target = mid(x[pid+1], x[pid-1])
     x[pid] = Motion.pose.position