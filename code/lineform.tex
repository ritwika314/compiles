using Motion:
  sensors Position pos
  actuators Position target

allread: Position [] x $\label{lineform-allread}$

TargetUpdate:
  pre True
  eff if ~(pid == $\NMAX$ - 1 or pid == 0):
     Motion.target = mid(x[pid+1], x[pid-1])
     x[pid] = Motion.pos